
#Область ОбработчикиСобытийФормы

// Процедура - обработчик события ПриСозданииНаСервере.
// В процедуре осуществляется
// - инициализация реквизитов формы,
// - установка параметров функциональных опций формы.
//
&НаСервере
Процедура ПриСозданииНаСервере(Отказ, СтандартнаяОбработка)
	
	Если Параметры.Свойство("ТекстФормулы") Тогда
		ТекстФормулы = Параметры.ТекстФормулы;
	КонецЕсли;	
	
	СписокВидовНачислений.Параметры.УстановитьЗначениеПараметра("Ссылка", Параметры.Ссылка);
КонецПроцедуры // ПриСозданииНаСервере()

#КонецОбласти

#Область ОбработчикиСобытийЭлементовШапкиФормы

&НаКлиенте
// Процедура - обработчик события Выбор динамического списка ПараметрыТоваров.
//
Процедура ПараметрыРасчетовВыбор(Элемент, ВыбраннаяСтрока, Поле, СтандартнаяОбработка)
	
	СтандартнаяОбработка = Ложь;
	СтруктураДанных = Новый Структура("ВыбраннаяСтрока", ВыбраннаяСтрока);
	
	ТекстВФормулу = ПолучитьНаименованиеВидаНачисления(СтруктураДанных);
    ВставитьТекстВФормулу(ТекстВФормулу);

КонецПроцедуры // ПараметрыРасчетовВыбор()

#КонецОбласти

#Область ОбработчикиКомандФормы

&НаКлиенте
// Процедура - обработчик нажатия кнопки ОК
//
Процедура КомандаОК(Команда)
	
	Закрыть(ТекстФормулы);
	
КонецПроцедуры // КомандаОКВыполнить()

&НаКлиенте
Процедура ДекорацияНормаДнейНажатие(Элемент)
	ТекстФормулы = ТекстФормулы + " [НормаДней] ";
КонецПроцедуры

&НаКлиенте
Процедура ДекорацияНормаЧасовНажатие(Элемент)
	ТекстФормулы = ТекстФормулы + " [НормаЧасов] ";
КонецПроцедуры

&НаКлиенте
Процедура ДекорацияФактДнейНажатие(Элемент)
	ТекстФормулы = ТекстФормулы + " [ФактДней] ";
КонецПроцедуры

&НаКлиенте
Процедура ДекорацияФактЧасовНажатие(Элемент)
	ТекстФормулы = ТекстФормулы + " [ФактЧасов] ";
КонецПроцедуры

&НаКлиенте
Процедура ДекорацияРазмерНажатие(Элемент)
	ТекстФормулы = ТекстФормулы + " [Размер] ";
КонецПроцедуры

#КонецОбласти

#Область СлужебныеПроцедурыИФункции

&НаКлиенте
// Процедура вставляет текст, передаваемый в качестве параметра в поле 
// табличного документа.
//
Процедура ВставитьТекстВФормулу(Показатель)
	
	ТекстФормулы = ТекстФормулы + " [" + СокрЛП(Показатель) + "] ";
			
КонецПроцедуры // ВставитьТекстВФормулу()	

&НаСервереБезКонтекста
// Функция получает наименование вида начисления.
//
Функция ПолучитьНаименованиеВидаНачисления(СтруктураДанных)
	
	Возврат СокрЛП(СтруктураДанных.ВыбраннаяСтрока.Наименование);

КонецФункции // ПолучитьНаименованиеВидаНачисления()

#КонецОбласти