#Область ОбработчикиСобытийФормы

// Процедура - обработчик события ПриСозданииНаСервере.
// В процедуре осуществляется
// - инициализация реквизитов формы,
// - установка параметров функциональных опций формы.
//
&НаСервере
Процедура ПриСозданииНаСервере(Отказ, СтандартнаяОбработка)
		
	Если Параметры.Отбор.Свойство("ДокументВладелец") Тогда 
		ДокументВладелец = Параметры.Отбор.ДокументВладелец;		
	КонецЕсли;	
	Если Параметры.Отбор.Свойство("ВидОперацииВладелец") Тогда 
		ВидОперацииВладелец = Параметры.Отбор.ВидОперацииВладелец;		
	КонецЕсли;	
	
КонецПроцедуры

&НаКлиенте
Процедура СписокПередНачаломДобавления(Элемент, Отказ, Копирование, Родитель, Группа, Параметр)
	Если ДокументВладелец = Неопределено 
		Или Группа Тогда 
		Возврат;
	КонецЕсли;	

	// Определение Вида основного договора по открытому документу.
	Отказ = Истина;
	ПараметрыФормы = Новый Структура;
	ПараметрыФормы.Вставить("ЗначенияЗаполнения", Новый Структура("Родитель", Родитель));
	ПараметрыФормы.Вставить("ПараметрыВыбора", Новый Структура("ДокументВладелец, ВидОперацииВладелец", ДокументВладелец, ВидОперацииВладелец));
	ОткрытьФорму("Справочник.Контрагенты.ФормаОбъекта", ПараметрыФормы, Элементы.Список,,,,, РежимОткрытияОкнаФормы.БлокироватьОкноВладельца);
КонецПроцедуры

#КонецОбласти

